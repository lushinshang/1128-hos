<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏥 醫療資安教室 - 多版本教學</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --pastel-pink: #FFB6D9;
            --pastel-blue: #A8D8F0;
            --pastel-green: #B4E7D6;
            --pastel-yellow: #FFEAA7;
            --pastel-purple: #D4C5F9;
            --pastel-peach: #FDBCB4;
            --soft-white: #FFFAF7;
            --soft-gray: #F5F3F0;
            --dark-text: #4A4A4A;
        }

        body {
            font-family: 'Noto Sans TC', 'Arial', sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            background: linear-gradient(135deg, var(--pastel-blue) 0%, var(--pastel-purple) 50%, var(--pastel-pink) 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
        }

        /* ========== 頂部標題 ========== */
        header {
            background: linear-gradient(135deg, rgba(255,182,217,0.95), rgba(212,197,249,0.95));
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 10px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        h1 {
            color: white;
            font-size: 1.5em;
            font-weight: 700;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            color: rgba(255,255,255,0.9);
            font-size: 0.85em;
            margin-top: 3px;
        }

        /* ========== 分頁標籤 ========== */
        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
            background: var(--soft-white);
            padding: 10px;
            border-radius: 12px;
            overflow-x: auto;
        }

        .tab-button {
            flex: 1;
            min-width: 80px;
            padding: 10px 15px;
            border: none;
            background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-purple));
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .tab-button.active {
            background: linear-gradient(135deg, var(--pastel-peach), var(--pastel-pink));
            box-shadow: 0 4px 12px rgba(255,182,217,0.4);
        }

        /* ========== 分頁內容 ========== */
        .tab-content {
            /* 關鍵：使用 display: none 會導致 Mermaid 無法計算尺寸 */
            /* 改用 visibility 和 height: 0 但仍保留在渲染樹 */
            display: block;
            visibility: hidden;
            height: 0;
            overflow: hidden;
            position: absolute;
            width: 100%;
            opacity: 0;
            pointer-events: none;
        }

        .tab-content.active {
            /* 激活時完全顯示 */
            visibility: visible;
            height: auto;
            overflow: visible;
            position: static;
            opacity: 1;
            pointer-events: auto;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0;
                transform: translateY(10px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ========== 內容卡片 ========== */
        .section {
            background: var(--soft-white);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 12px;
            border-left: 4px solid var(--pastel-pink);
        }

        h2 {
            color: var(--pastel-pink);
            font-size: 1.3em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        h3 {
            color: #333;
            font-size: 1.1em;
            margin: 12px 0 8px 0;
            font-weight: 600;
        }

        p {
            margin: 8px 0;
            line-height: 1.6;
        }

        /* ========== 彩色盒子 ========== */
        .knowledge-box {
            background: linear-gradient(135deg, var(--pastel-blue), rgba(168,216,240,0.3));
            border-left: 3px solid var(--pastel-blue);
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .alert-box {
            background: linear-gradient(135deg, var(--pastel-yellow), rgba(255,234,167,0.3));
            border-left: 3px solid var(--pastel-yellow);
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .danger-box {
            background: linear-gradient(135deg, var(--pastel-peach), rgba(253,188,180,0.3));
            border-left: 3px solid var(--pastel-peach);
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .success-box {
            background: linear-gradient(135deg, var(--pastel-green), rgba(180,231,214,0.3));
            border-left: 3px solid var(--pastel-green);
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        /* ========== 列表 ========== */
        ul, ol {
            margin-left: 20px;
            margin-top: 8px;
        }

        li {
            margin: 4px 0;
            font-size: 0.95em;
        }

        /* ========== 表格 ========== */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 0.9em;
        }

        th {
            background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-purple));
            color: white;
            padding: 10px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 8px 10px;
            border-bottom: 1px solid rgba(200,200,200,0.15);
        }

        tr:nth-child(even) {
            background: rgba(255,182,217,0.08);
        }

        /* ========== 徽章 ========== */
        .badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-purple));
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin: 3px 3px 3px 0;
            font-weight: 600;
        }

        .scenario-title {
            background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-peach));
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 1.15em;
            font-weight: 700;
        }

        /* ========== 頁尾 ========== */
        footer {
            background: linear-gradient(135deg, var(--pastel-green), var(--pastel-blue));
            color: white;
            text-align: center;
            padding: 12px;
            margin-top: 10px;
            border-radius: 12px;
            font-size: 0.9em;
        }

        /* ========== 響應式設計 ========== */
        @media (max-width: 768px) {
            .tab-button {
                min-width: 70px;
                padding: 8px 12px;
                font-size: 0.85em;
            }

            h1 {
                font-size: 1.3em;
            }

            h2 {
                font-size: 1.1em;
            }

            .tabs {
                gap: 3px;
                padding: 8px;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 12px 15px;
            }

            h1 {
                font-size: 1.2em;
            }

            .subtitle {
                font-size: 0.75em;
            }

            .tabs {
                gap: 2px;
                padding: 6px;
            }

            .tab-button {
                min-width: 60px;
                padding: 6px 10px;
                font-size: 0.8em;
            }

            .section {
                padding: 12px;
                margin-bottom: 8px;
            }

            h2 {
                font-size: 1em;
            }

            h3 {
                font-size: 0.95em;
            }
        }

        .learning-objective {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0;
        }

        .mermaid-container {
            background: transparent;
            padding: 10px 0;
            margin: 10px 0;
            overflow-x: auto;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🏥 醫療資安教室 💉</h1>
            <p class="subtitle">選擇您的學習版本 - 完整 | 可愛 | 專業</p>
        </header>

        <!-- 分頁標籤 -->
        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('complete')">📋 完整版</button>
            <button class="tab-button" onclick="switchTab('kawaii')">✨ 可愛版</button>
            <button class="tab-button" onclick="switchTab('professional')">👔 專業版</button>
        </div>

        <!-- ============ 完整版內容 ============ -->
        <div id="complete" class="tab-content active">
            <section class="section">
                <div class="scenario-title">📧 場景 1：網路釣魚與橫向移動攻擊</div>
                
                <h2>🎯 攻擊概述</h2>
                <div class="knowledge-box">
                    <p><strong>這個場景展示：</strong></p>
                    <ul>
                        <li>✓ 現實的外部攻擊鏈 - 針對網路郵件系統</li>
                        <li>✓ 如何利用公開資訊進行低成本偵查</li>
                        <li>✓ 弱密碼、重複使用密碼的真實風險</li>
                        <li>✓ 攻擊者如何透過社交工程騙取信任</li>
                        <li>✓ 一旦竊取憑證，技術防禦如何被繞過</li>
                    </ul>
                </div>

                <h3>🔍 完整攻擊流程</h3>
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph TD
                            A["🌐 偵查階段<br/>蒐集資訊"]
                            B["📧 武裝化<br/>製作釣魚"]
                            C["🎣 交付<br/>網路釣魚"]
                            D["🔓 利用<br/>竊取密碼"]
                            E["🚪 初始存取<br/>進入內網"]
                            F["🔑 權限提升<br/>管理員"]
                            G["💾 行動<br/>竊取資料"]
                            H["🚨 勒索患者資料"]
                            
                            A -->|發現郵件格式| B
                            B -->|發送郵件| C
                            C -->|點擊連結| D
                            D -->|獲得憑證| E
                            E -->|橫向移動| F
                            F -->|發現目標| G
                            G -->|外洩| H
                            
                            style A fill:#FFB6D9,color:#fff
                            style B fill:#A8D8F0,color:#fff
                            style C fill:#FFEAA7,color:#333
                            style D fill:#FDBCB4,color:#fff
                            style E fill:#B4E7D6,color:#fff
                            style F fill:#D4C5F9,color:#fff
                            style G fill:#FFB6D9,color:#fff
                            style H fill:#FF6B6B,color:#fff
                    </div>
                </div>
                <div class="knowledge-box">
                    <p><strong>第 1-4 步：情報蒐集到密碼竊取</strong></p>
                    <ul>
                        <li>在醫院網站蒐集醫生名單和郵件格式</li>
                        <li>研究組織結構與系統架構</li>
                        <li>製作超逼真的釣魚郵件</li>
                        <li>成功竊取醫生的網路郵件憑證</li>
                    </ul>
                </div>

                <div class="alert-box">
                    <p><strong>第 5 步：魚叉式網路釣魚</strong></p>
                    <ul>
                        <li>超級定製化的攻擊訊息</li>
                        <li>冒充可信來源（同事、IT部門）</li>
                        <li>利用心理技巧製造緊迫感</li>
                        <li>多渠道投遞（郵件、Slack、簡訊）</li>
                    </ul>
                </div>

                <div class="danger-box">
                    <p><strong>第 6-7 步：數據竊取與覆蓋蹤跡</strong></p>
                    <ul>
                        <li>轉移患者記錄和財務資料</li>
                        <li>提取系統旗標標記</li>
                        <li>建立持久後門保持存取</li>
                        <li>為勒索或資料外洩做準備</li>
                    </ul>
                </div>

                <h3>🛡️ 防禦建議</h3>
                <div class="success-box">
                    <ul>
                        <li>🌟 多因素認證（MFA）- 阻止密碼洩露的影響</li>
                        <li>🌟 網路分段 - 限制橫向移動範圍</li>
                        <li>🌟 最小權限原則 - 員工只能存取必要系統</li>
                        <li>🌟 監控和告警 - 檢測異常登入</li>
                        <li>🌟 員工安全培訓 - 識別釣魚郵件</li>
                        <li>🌟 定期滲透測試 - 找出網路漏洞</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <div class="scenario-title">🔑 場景 2：低權限帳戶的橫向移動</div>
                
                <h2>🎯 攻擊概述</h2>
                <div class="knowledge-box">
                    <p><strong>從 AD 帳戶開始的深度滲透：</strong></p>
                    <ul>
                        <li>✓ 從低權限活動目錄帳戶開始</li>
                        <li>✓ 從執行的二進制檔案中提取硬編碼憑證</li>
                        <li>✓ 分析使用者密碼模式</li>
                        <li>✓ 利用洩露的憑證濫用 ADCS 進行權限提升</li>
                    </ul>
                </div>

                <h3>🔍 詳細步驟</h3>
                <div class="alert-box">
                    <p><strong>關鍵技術：</strong></p>
                    <ul>
                        <li>從應用程式執行檔提取密碼哈希</li>
                        <li>分析 AD 帳戶的密碼建立模式</li>
                        <li>利用 ADCS（Active Directory 憑證服務）漏洞</li>
                        <li>Kerberos 票券中轉與提升權限</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <div class="scenario-title">🏭 場景 3：供應鏈攻擊</div>
                
                <h2>🎯 攻擊概述</h2>
                <div class="knowledge-box">
                    <p><strong>通過受信軟體傳遞惡意程式：</strong></p>
                    <ul>
                        <li>✓ 定位 SIEM（安全資訊事件管理系統）</li>
                        <li>✓ 識別更新機制</li>
                        <li>✓ 毒化源軟體包進行供應鏈攻擊</li>
                    </ul>
                </div>

                <h3>🔍 攻擊流程</h3>
                <div class="danger-box">
                    <p><strong>三個關鍵步驟：</strong></p>
                    <ul>
                        <li><strong>步驟 1：</strong>定位 SIEM 獲得可見性和進一步利用</li>
                        <li><strong>步驟 2：</strong>識別組織基礎設施內使用的更新機制</li>
                        <li><strong>步驟 3：</strong>透過毒化源軟體包執行供應鏈攻擊</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <div class="scenario-title">⚕️ 場景 4：醫療設備直接攻擊</div>
                
                <h2>🎯 場景概述</h2>
                <div class="danger-box">
                    <h3>⚠️ 直接威脅患者生命！</h3>
                    <p>與企業資料洩露不同，這種攻擊可直接傷害患者：</p>
                    <ul>
                        <li>🚨 修改患者監測數值</li>
                        <li>🚨 禁用警報系統</li>
                        <li>🚨 改變輸液泵藥物劑量</li>
                        <li>🚨 監視手術室過程</li>
                        <li>🚨 竊取敏感醫療資訊</li>
                    </ul>
                </div>

                <h3>🏥 醫療設備網路架構圖</h3>
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph TB
                            FW["🔒 防火牆"]
                            
                            M1["💓 患者監護儀"]
                            M2["💉 輸液泵"]
                            M3["📸 PACS系統"]
                            M4["🔊 超聲設備"]
                            
                            A1["📋 HIS系統"]
                            A2["📧 郵件服務器"]
                            
                            FW --> M1
                            FW --> M2
                            FW --> M3
                            FW --> M4
                            FW --> A1
                            FW --> A2
                            
                            style FW fill:#00AA00,color:#fff
                            style M1 fill:#FFB6D9,color:#fff
                            style M2 fill:#FFB6D9,color:#fff
                            style M3 fill:#A8D8F0,color:#fff
                            style M4 fill:#A8D8F0,color:#fff
                            style A1 fill:#B4E7D6,color:#fff
                            style A2 fill:#B4E7D6,color:#fff
                    </div>
                </div>
                <div class="knowledge-box">
                    <p><strong>患者監護儀漏洞：</strong></p>
                    <ul>
                        <li>透過 Android Debug Bridge（ADB）繞過認證</li>
                        <li>無需密碼即可獲得管理員存取</li>
                        <li>存取應用程式儲存提取敏感數據</li>
                        <li>修改設備設定改變監護儀行為</li>
                    </ul>
                </div>

                <h3>📹 子場景 4.2：網路攝像頭與 RTSP</h3>
                <div class="alert-box">
                    <p><strong>手術室監視威脅：</strong></p>
                    <ul>
                        <li>掃描開放的 RTSP 埠（554）</li>
                        <li>即時監看手術過程</li>
                        <li>錄製並勒索患者隱私影像</li>
                        <li>在暗網上販售敏感視訊</li>
                    </ul>
                </div>

                <h3>🏥 子場景 4.3：PACS 系統攻擊</h3>
                <div class="knowledge-box">
                    <p><strong>醫學影像系統利用：</strong></p>
                    <ul>
                        <li>控制超聲探針和無線設備</li>
                        <li>存取患者影像和診斷資料</li>
                        <li>修改醫療記錄</li>
                    </ul>
                </div>

                <h3>🛡️ IoMT 防禦策略</h3>
                <div class="success-box">
                    <ul>
                        <li>🌟 零信任架構 - 每台設備都需驗證</li>
                        <li>🌟 網路分段 - 醫療設備隔離</li>
                        <li>🌟 設備清單管理 - 追蹤所有連接設備</li>
                        <li>🌟 流量監控 - 檢測異常通信</li>
                        <li>🌟 定期滲透測試 - 識別可利用漏洞</li>
                        <li>🌟 廠商合作 - 獲取安全補丁</li>
                        <li>🌟 物理安全 - 限制設備存取</li>
                    </ul>
                </div>

                <h3>📊 驚人的真實數據</h3>
                <div class="alert-box">
                    <ul>
                        <li>📉 73% 的輸液泵有可被利用的漏洞</li>
                        <li>📉 56% 的醫院在 2 年內遭遇 IoT 設備攻擊</li>
                        <li>📉 88% 的資料洩露涉及 IoT 設備</li>
                        <li>📉 平均需要 327 天才能發現 IoMT 攻擊</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <div class="scenario-title">🛡️ 綜合防禦框架</div>
                
                <h2>分層防禦（國防縱深）</h2>
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph TB
                            ATK["😈 攻擊者"]
                            L1["🌐 第1層：周邊防禦<br/>防火牆 IPS DDoS"]
                            L2["🔐 第2層：存取控制<br/>MFA 零信任 PAM"]
                            L3["🔗 第3層：網路分段<br/>微分段 VLAN VPC"]
                            L4["💻 第4層：端點防禦<br/>EDR 防毒 補丁"]
                            L5["👁️ 第5層：監控檢測<br/>SIEM UBA 威脅獵捕"]
                            L6["🔄 第6層：應急恢復<br/>備份 復原 業務連續性"]
                            OK["✅ 患者安全保護"]
                            
                            ATK --> L1
                            L1 --> L2
                            L2 --> L3
                            L3 --> L4
                            L4 --> L5
                            L5 --> L6
                            L6 --> OK
                            
                            style ATK fill:#8B0000,color:#fff
                            style L1 fill:#FF6B6B,color:#fff
                            style L2 fill:#FFA500,color:#fff
                            style L3 fill:#FFD700,color:#333
                            style L4 fill:#90EE90,color:#fff
                            style L5 fill:#87CEEB,color:#fff
                            style L6 fill:#DDA0DD,color:#fff
                            style OK fill:#00AA00,color:#fff
                    </div>
                </div>
                <div class="knowledge-box">
                    <table>
                        <tr>
                            <th>防禦層</th>
                            <th>主要技術</th>
                        </tr>
                        <tr>
                            <td><strong>第 1 層：周邊</strong></td>
                            <td>防火牆、IPS、DDoS 防護</td>
                        </tr>
                        <tr>
                            <td><strong>第 2 層：存取控制</strong></td>
                            <td>MFA、零信任、特權存取管理</td>
                        </tr>
                        <tr>
                            <td><strong>第 3 層：網路分段</strong></td>
                            <td>醫療設備隔離、微分段</td>
                        </tr>
                        <tr>
                            <td><strong>第 4 層：端點</strong></td>
                            <td>EDR、防毒、補丁管理</td>
                        </tr>
                        <tr>
                            <td><strong>第 5 層：監控</strong></td>
                            <td>SIEM、威脅獵捕、行為分析</td>
                        </tr>
                        <tr>
                            <td><strong>第 6 層：應急</strong></td>
                            <td>備份、恢復、業務連續性</td>
                        </tr>
                    </table>
                </div>

                <h3>💡 實踐行動計畫</h3>
                <div class="success-box">
                    <p><strong>安全部門：</strong></p>
                    <ol>
                        <li>列出所有連接的設備</li>
                        <li>進行漏洞評估</li>
                        <li>根據風險優先化修復</li>
                        <li>實施分層防禦</li>
                        <li>定期培訓員工</li>
                        <li>演習應急計畫</li>
                        <li>與廠商合作</li>
                    </ol>
                </div>
            </section>

            <section class="section">
                <div class="scenario-title">📌 關鍵要點</div>
                
                <h2>三件必須記住的事</h2>
                <div class="knowledge-box">
                    <p><strong>1️⃣ 患者安全優先</strong></p>
                    <p>網路安全不是 IT 問題，而是患者生命攸關的問題</p>
                </div>

                <div class="alert-box">
                    <p><strong>2️⃣ 防禦是持續的過程</strong></p>
                    <p>威脅不停，防禦也必須不停進化</p>
                </div>

                <div class="danger-box">
                    <p><strong>3️⃣ 人是最關鍵的</strong></p>
                    <p>員工安全習慣既是最強防線，也是最大風險</p>
                </div>
            </section>
        </div>

        <!-- ============ 可愛版內容 ============ -->
        <div id="kawaii" class="tab-content">
            <section class="section">
                <h2>✨ 歡迎來到可愛版教室！</h2>
                
                <div class="knowledge-box">
                    <h3>📚 我們今天要學什麼？</h3>
                    <p>讓我們用可愛的方式來認識醫療機構面臨的網路安全威脅和防禦方法吧！ 🎀</p>
                    
                    <div class="learning-objective">
                        <span class="badge">🎯 認識網路攻擊</span>
                        <span class="badge">🔐 學習防禦技巧</span>
                        <span class="badge">⚠️ 識別危險信號</span>
                        <span class="badge">💪 建立安全習慣</span>
                    </div>
                </div>

                <h3>為什麼醫療機構這麼容易被攻擊呢？</h3>
                <div class="knowledge-box">
                    <ul>
                        <li><strong>珍貴的患者資訊：</strong>每份患者記錄在暗網上可以賣 $200～$1,000 呢！ 💰</li>
                        <li><strong>必須快速應急：</strong>醫院為了拯救患者生命，會快速支付贖金 💔</li>
                        <li><strong>舊系統很多：</strong>醫院裡有許多老舊的電腦和醫療設備很難更新 🖥️</li>
                        <li><strong>聯網醫療設備：</strong>輸液泵、心臟監護儀等設備通常安全防護不足 🏥</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <div class="scenario-title">📧 場景 1：危險的電子郵件和資料竊取</div>
                
                <h3>🔍 完整的攻擊流程（圖解）</h3>
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph TD
                            A["🌐 蒐集資訊<br/>找醫生名單"]
                            B["🎭 製作釣魚郵件<br/>超逼真"]
                            C["🎣 釣魚郵件<br/>到達收件箱"]
                            D["🔓 竊取密碼<br/>噢不"]
                            E["🚪 進入內網<br/>完全存取"]
                            F["👑 權限提升<br/>成為管理員"]
                            G["📋 竊取患者資料<br/>大量資料"]
                            H["😱 患者隱私洩露<br/>災難"]
                            
                            A -->|學習郵件格式| B
                            B -->|發送| C
                            C -->|點擊危險連結| D
                            D -->|獲得憑證| E
                            E -->|四處遊走| F
                            F -->|發現目標| G
                            G -->|勒索或販售| H
                            
                            style A fill:#FFB6D9,color:#fff
                            style B fill:#A8D8F0,color:#fff
                            style C fill:#FFEAA7,color:#333
                            style D fill:#FDBCB4,color:#fff
                            style E fill:#B4E7D6,color:#fff
                            style F fill:#D4C5F9,color:#fff
                            style G fill:#FFB6D9,color:#fff
                            style H fill:#FF6B6B,color:#fff
                    </div>
                </div>
                <div class="knowledge-box">
                    <p>💌 壞人破門而入後，他們會偽裝成合法使用者，悄悄地在醫院的電腦網路裡四處移動，就像忍者一樣！最後盜取患者資料或鎖定檔案以索取贖金。</p>
                </div>

                <h3>🎯 攻擊的各個階段</h3>
                <div class="alert-box">
                    <p><strong>📧 從收集資訊到竊取密碼</strong></p>
                    <ul>
                        <li>在醫院網站尋找醫生名單 🔍</li>
                        <li>學習醫院的電子郵件格式 📝</li>
                        <li>製作超逼真的假郵件 🎭</li>
                        <li>誘騙醫生點擊危險連結或開啟有病毒的檔案 😈</li>
                    </ul>
                </div>

                <div class="danger-box">
                    <p><strong>💣 魚叉式網路釣魚</strong></p>
                    <ul>
                        <li><strong>超級定製：</strong>壞人會研究目標人物，說出只有熟人才知道的事 🎯</li>
                        <li><strong>假扮你信任的人：</strong>冒充同事、主管或 IT 部門 🎭</li>
                        <li><strong>利用心理技巧：</strong>製造緊急感（「系統故障了！」）讓你快速行動 ⏰</li>
                        <li><strong>多種傳播方式：</strong>郵件、Slack、Teams、簡訊 📱</li>
                    </ul>
                </div>

                <div class="success-box">
                    <p><strong>🛡️ 我們怎樣防禦？</strong></p>
                    <ul>
                        <li>🌟 多重認證：除了密碼，還要輸入簡訊驗證碼或指紋 🔐</li>
                        <li>🌟 分隔網路：把醫療系統和辦公系統分開 🔗</li>
                        <li>🌟 最小權限：員工只能用必要的權限 👤</li>
                        <li>🌟 監控異常：偵測奇怪的登入或檔案轉移 👀</li>
                        <li>🌟 員工教育：教大家識別釣魚郵件 🎓</li>
                        <li>🌟 定期檢查：進行安全演習和滲透測試 🧪</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <div class="scenario-title">🏥 場景 4：患者監護儀的危機</div>
                
                <h3>🛡️ 七層防禦金鐘罩（互動圖）</h3>
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph TB
                            A["😈 攻擊者<br/>試圖進入"]
                            L1["🚪 第1層<br/>防火牆<br/>被擋下"]
                            L2["🔐 第2層<br/>多重認證<br/>卡住"]
                            L3["🔗 第3層<br/>網路分段<br/>無法移動"]
                            L4["💻 第4層<br/>端點保護<br/>遭偵測"]
                            L5["👁️ 第5層<br/>實時監控<br/>被發現"]
                            L6["🚨 第6層<br/>自動隔離<br/>被切斷"]
                            L7["🔄 第7層<br/>自動復原<br/>患者安全"]
                            
                            A --> L1
                            L1 --> L2
                            L2 --> L3
                            L3 --> L4
                            L4 --> L5
                            L5 --> L6
                            L6 --> L7
                            
                            style A fill:#FF6B6B,color:#fff
                            style L1 fill:#FFB6D9,color:#fff
                            style L2 fill:#A8D8F0,color:#fff
                            style L3 fill:#FFEAA7,color:#333
                            style L4 fill:#FDBCB4,color:#fff
                            style L5 fill:#B4E7D6,color:#fff
                            style L6 fill:#D4C5F9,color:#fff
                            style L7 fill:#00AA00,color:#fff
                    </div>
                </div>
                <div class="danger-box">
                    <h3>🚨 這些攻擊直接威脅患者生命！</h3>
                    <p style="margin-top: 12px;"><strong>不同於盜取資料的攻擊，IoMT 攻擊可能讓患者喪命：</strong></p>
                    <ul style="margin-left: 20px; margin-top: 12px;">
                        <li>修改患者的心跳數值，醫生看不到真實狀況 💔</li>
                        <li>關閉警報系統，當患者出危險時沒人知道 🔔</li>
                        <li>改變輸液泵的藥物劑量，造成過度或不足用藥 💉</li>
                        <li>切斷患者的治療設備 ⚡</li>
                        <li>透過手術室攝像頭看到患者隱私部位 📹</li>
                    </ul>
                </div>

                <h3>🔓 怎樣入侵患者監護儀？</h3>
                <div class="alert-box">
                    <p><strong>📱 透過 Android 除錯橋樑進入</strong></p>
                    <ul>
                        <li>許多患者監護儀執行 Android 系統。如果啟用了開發者模式 (ADB)，壞人可以不用密碼直接遠端控制！</li>
                        <li>掃描醫院網路找開放的埠 🔍</li>
                        <li>連接到患者監護儀 🔗</li>
                        <li>不用密碼就得到管理員權限 😱</li>
                    </ul>
                </div>

                <h3>🛡️ 醫療設備怎樣保護自己？</h3>
                <div class="success-box">
                    <ul style="list-style: none; padding: 0;">
                        <li>🌟 <strong>零信任模式：</strong>每台設備都要驗證身份，即使在內部 🔐</li>
                        <li>🌟 <strong>網路分隔：</strong>把醫療設備隔離在專用網路區 🔗</li>
                        <li>🌟 <strong>訪問控制：</strong>只讓授權安全的設備連接 ✅</li>
                        <li>🌟 <strong>設備清單：</strong>追蹤所有設備和軟體版本 📝</li>
                        <li>🌟 <strong>流量監控：</strong>偵測異常的資料傳輸 👀</li>
                        <li>🌟 <strong>安全測試：</strong>定期進行滲透測試 🧪</li>
                        <li>🌟 <strong>廠商合作：</strong>向製造商申請安全補丁 🤝</li>
                        <li>🌟 <strong>物理安全：</strong>限制接近設備 🚪</li>
                    </ul>
                </div>

                <div class="knowledge-box">
                    <h3>📊 嚇人的真實數據</h3>
                    <ul style="margin-left: 20px;">
                        <li>73% 的輸液泵有可被利用的漏洞 😱</li>
                        <li>56% 的醫院在過去兩年遭遇 IoT 設備相關攻擊 🚨</li>
                        <li>88% 的資料外洩涉及 IoT 設備 💔</li>
                        <li>平均需要 327 天才能發現 IoMT 攻擊 ⏰</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>💡 我們可以做什麼？</h2>

                <h3>👨‍⚕️ 醫護人員</h3>
                <div class="success-box">
                    <ul style="list-style: none; padding: 0;">
                        <li>🌟 <strong>看清釣魚郵件：</strong>找拼寫錯誤、奇怪要求 🎣</li>
                        <li>🌟 <strong>不亂點連結：</strong>有疑問就打電話確認 ☎️</li>
                        <li>🌟 <strong>強密碼：</strong>至少 12 個字元混合大小寫數字符號 🔑</li>
                        <li>🌟 <strong>啟用多重認證：</strong>增加保護層 🛡️</li>
                        <li>🌟 <strong>回報異常：</strong>看到奇怪事情立即通知 IT 🚨</li>
                        <li>🌟 <strong>鎖電腦：</strong>離開時記得按 Win+L 🔐</li>
                        <li>🌟 <strong>不分享密碼：</strong>即使是同事也不行 🚫</li>
                    </ul>
                </div>

                <h3>📌 記住這三件事！ 🌟</h3>
                <div class="knowledge-box">
                    <ol style="margin-left: 20px; margin-top: 15px;">
                        <li><strong>患者安全最重要：</strong>網路安全不是 IT 的事，是患者生命的事 💕</li>
                        <li><strong>防禦是持續的：</strong>威脅不停，我們的防禦也不能停 ⏰</li>
                        <li><strong>人是關鍵：</strong>員工的安全習慣是最強也是最弱的防線 👥</li>
                    </ol>
                </div>
            </section>
        </div>

        <!-- ============ 專業版內容 ============ -->
        <div id="professional" class="tab-content">
            <section class="section">
                <h2>🎓 專業版課程概述</h2>
                
                <div class="knowledge-box">
                    <h3>課程範圍</h3>
                    <p>本課程透過真實的醫療機構網路攻擊場景，系統性地教授現代網路安全威脅和防禦策略。包含四個真實攻擊場景和對應的防禦框架。</p>
                </div>

                <h3>🚀 網路安全能力成熟度提升</h3>
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph LR
                            L1["1️⃣ 初始<br/>被動反應<br/>無規劃"]
                            L2["2️⃣ 受管<br/>事件響應<br/>基本日誌"]
                            L3["3️⃣ 定義<br/>安全政策<br/>標準化流程"]
                            L4["4️⃣ 量化<br/>性能指標<br/>自動化監控"]
                            L5["5️⃣ 優化<br/>威脅獵捕<br/>AI驅動防禦"]
                            
                            L1 --> L2
                            L2 --> L3
                            L3 --> L4
                            L4 --> L5
                            
                            style L1 fill:#FF6B6B,color:#fff
                            style L2 fill:#FFA500,color:#fff
                            style L3 fill:#FFD700,color:#333
                            style L4 fill:#87CEEB,color:#fff
                            style L5 fill:#00AA00,color:#fff
                    </div>
                </div>

                <div class="learning-objective">
                    <span class="badge">🎯 完全掌握攻擊流程</span>
                    <span class="badge">🔐 實施多層防禦</span>
                    <span class="badge">⚠️ 威脅指標識別</span>
                    <span class="badge">💡 風險管理</span>
                </div>
            </section>

            <section class="section">
                <div class="scenario-title">📧 場景 1：外部威脅 - 網路郵件系統</div>
                
                <h3>MITRE ATT&CK 框架</h3>
                <div class="knowledge-box">
                    <p><strong>相關技術：</strong>T1589、T1590、T1593、T1078、T1110、T1552、T1055</p>
                </div>

                <h3>攻擊鏈分析</h3>
                <div class="knowledge-box">
                    <table>
                        <tr>
                            <th>階段</th>
                            <th>活動</th>
                            <th>技術</th>
                        </tr>
                        <tr>
                            <td>偵查</td>
                            <td>蒐集公開信息</td>
                            <td>被動資訊蒐集</td>
                        </tr>
                        <tr>
                            <td>武裝化</td>
                            <td>製作釣魚郵件</td>
                            <td>社交工程</td>
                        </tr>
                        <tr>
                            <td>交付</td>
                            <td>發送釣魚郵件</td>
                            <td>網路釣魚</td>
                        </tr>
                        <tr>
                            <td>利用</td>
                            <td>竊取憑證</td>
                            <td>密鑰記錄、密碼噴灑</td>
                        </tr>
                        <tr>
                            <td>安裝</td>
                            <td>建立後門</td>
                            <td>持久性機制</td>
                        </tr>
                        <tr>
                            <td>命令控制</td>
                            <td>遠端管理</td>
                            <td>C2 通道</td>
                        </tr>
                        <tr>
                            <td>行動</td>
                            <td>數據外洩</td>
                            <td>資料竊取、加密</td>
                        </tr>
                    </table>
                </div>

                <h3>防禦控制</h3>
                <div class="success-box">
                    <h4>技術控制</h4>
                    <ul>
                        <li><strong>身份驗證：</strong>MFA、FIDO2、生物識別</li>
                        <li><strong>網路防禦：</strong>NGFW、IPS、郵件安全閘道</li>
                        <li><strong>端點防禦：</strong>EDR、XDR、應用程式白名單</li>
                        <li><strong>可視性：</strong>SIEM、UBA、網路行為分析</li>
                    </ul>
                    <h4>管理控制</h4>
                    <ul>
                        <li>安全意識培訓</li>
                        <li>釣魚模擬練習</li>
                        <li>事件回應計畫</li>
                        <li>定期滲透測試</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <div class="scenario-title">⚕️ 場景 4：醫療 IoT 風險評估</div>
                
                <h3>IoMT 設備安全架構</h3>
                <div class="knowledge-box">
                    <h4>識別與庫存</h4>
                    <ul>
                        <li>資產發現與分類</li>
                        <li>軟件物料清單（SBOM）</li>
                        <li>安全基準評估</li>
                    </ul>
                    <h4>分類與分段</h4>
                    <ul>
                        <li>按功能和風險分類</li>
                        <li>網路分段策略</li>
                        <li>微分段實施</li>
                    </ul>
                    <h4>監控與偵測</h4>
                    <ul>
                        <li>異常檢測</li>
                        <li>威脅獵捕</li>
                        <li>SIEM 整合</li>
                    </ul>
                </div>

                <h3>醫療設備漏洞分類</h3>
                <div class="alert-box">
                    <table>
                        <tr>
                            <th>漏洞類型</th>
                            <th>CVSS 評分</th>
                            <th>影響</th>
                            <th>補救時間</th>
                        </tr>
                        <tr>
                            <td>硬編碼憑證</td>
                            <td>9.8</td>
                            <td>完全系統損害</td>
                            <td>0 天</td>
                        </tr>
                        <tr>
                            <td>預設密碼</td>
                            <td>9.1</td>
                            <td>未授權存取</td>
                            <td>1 天</td>
                        </tr>
                        <tr>
                            <td>協議漏洞</td>
                            <td>8.6</td>
                            <td>資料修改</td>
                            <td>7 天</td>
                        </tr>
                        <tr>
                            <td>過時韌體</td>
                            <td>7.5</td>
                            <td>服務中斷</td>
                            <td>30 天</td>
                        </tr>
                    </table>
                </div>
            </section>

            <section class="section">
                <h2>🛡️ 醫療機構網路安全成熟度模型</h2>
                
                <div class="knowledge-box">
                    <h3>五級成熟度模型</h3>
                    <table>
                        <tr>
                            <th>等級</th>
                            <th>描述</th>
                            <th>特徵</th>
                        </tr>
                        <tr>
                            <td><strong>1. 初始</strong></td>
                            <td>沒有組織的過程</td>
                            <td>被動反應、無法預測</td>
                        </tr>
                        <tr>
                            <td><strong>2. 受管</strong></td>
                            <td>基本流程確立</td>
                            <td>事件響應、基本日誌</td>
                        </tr>
                        <tr>
                            <td><strong>3. 定義</strong></td>
                            <td>流程標準化</td>
                            <td>安全政策、角色定義</td>
                        </tr>
                        <tr>
                            <td><strong>4. 量化</strong></td>
                            <td>流程受到控制</td>
                            <td>監控、性能指標</td>
                        </tr>
                        <tr>
                            <td><strong>5. 優化</strong></td>
                            <td>持續改進</td>
                            <td>威脅獵捕、AI-powered</td>
                        </tr>
                    </table>
                </div>
            </section>

            <section class="section">
                <h2>📊 結論與未來發展</h2>
                
                <div class="knowledge-box">
                    <h3>Red vs. Blue Team 對抗</h3>
                    <ul>
                        <li>持續的對抗是實踐網路安全的必要條件</li>
                        <li>實時攻擊演習對於認知和教育至關重要</li>
                        <li>醫療部門需要專業的網路靶場進行訓練</li>
                    </ul>
                </div>

                <div class="success-box">
                    <h3>後續建議</h3>
                    <ul>
                        <li>與醫療機構合作進行實時操作演習</li>
                        <li>在醫療部門持續進行網路安全能力建設</li>
                        <li>建立關鍵基礎設施特定的網路靶場</li>
                        <li>提高對醫療網路安全特殊需求的認知</li>
                    </ul>
                </div>
            </section>
        </div>

        <footer>
            ✨ 感謝您使用本教室！選擇適合您的版本進行學習 🎓 💕
        </footer>
    </div>

    <script>
        // ========== 簡單可靠的 Mermaid 分頁解決方案 ==========
        
        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose'
        });

        function switchTab(tabName) {
            // 移除所有分頁的 active 類
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.remove('active');
            });
            
            // 移除所有按鈕的活躍狀態
            document.querySelectorAll('.tab-button').forEach(el => {
                el.classList.remove('active');
            });
            
            // 激活選中的分頁和按鈕
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // 觸發該分頁的 Mermaid 渲染
            setTimeout(() => {
                mermaid.run();
            }, 100);
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 頁面加載時初始化
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                mermaid.run();
                console.log('✅ Mermaid 初始化完成');
            }, 500);
        });
    </script>
</body>
</html>
